

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Modules, file I/O (input/output) &#8212; Introduction to scientific programming in Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'session05';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="More on functions, loops, dictionaries, and files" href="session06.html" />
    <link rel="prev" title="Advanced data types: lists, tuples, sets, dictionaries" href="session04.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Introduction to scientific programming in Python</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Course overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Foundations</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="session01.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="session02.html">Data types and statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="session03.html">Functions and conditional execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="session04.html">Advanced data types: lists, tuples, sets, dictionaries</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Modules, file I/O (input/output)</a></li>
<li class="toctree-l1"><a class="reference internal" href="session06.html">More on functions, loops, dictionaries, and files</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extended basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="session07.html">For efficiency’s sake: structured programs, packages, regular expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="session08.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="session09.html">Recursion and trees</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Applications</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="session10.html">Processing corpus data using <em>NLTK</em>, <em>numpy</em>, and <em>matplotlib</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="session11.html">Programming in experimental research</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/michael-franke/PythonIntro/main?urlpath=tree/session05.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/michael-franke/PythonIntro/blob/main/session05.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/michael-franke/PythonIntro" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/michael-franke/PythonIntro/issues/new?title=Issue%20on%20page%20%2Fsession05.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/session05.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Modules, file I/O (input/output)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modules">Modules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-modules">Import modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-your-homework-as-module">Example: Your homework as module</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-i-o">File I/O</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-writing-to-text-files">Reading and writing to text files</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-elements-of-file-input">Basic elements of file input:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-elements-of-file-output">Basic elements of file output:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-encodings">FIle encodings</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#more-on-different-encodings">More on different encodings</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-writing-to-different-encodings">Reading and writing to different encodings</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-formats">File formats</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#csv-and-tsv">CSV and TSV</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#extensible-markup-language-xml">Extensible Markup Language (XML)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#javascript-object-notation-json">JavaScript Object Notation (JSON):</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wrapping-up-lose-ends-exception-handling">Wrapping up lose ends: exception handling</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="modules-file-i-o-input-output">
<h1>Modules, file I/O (input/output)<a class="headerlink" href="#modules-file-i-o-input-output" title="Permalink to this heading">#</a></h1>
<p><strong>So far, all of our Python programs were self-contained</strong>, that is, they did not rely on external data files or pieces of code (except for in-built Python functions and methods). In most real-life situations, however, you will work off of existing files (e.g., for data analysis) or from pre-existing code (e.g., when adding new functionalities to an app or program). In this session, you will learn how to <strong>import and use</strong> external Python code as <strong>modules</strong> and how to <strong>create, read from, and write to files</strong>.</p>
<section id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this heading">#</a></h2>
<p><strong>Modules are Python files intended for use in other Python programs</strong>. Any <em>.py</em> file can be loaded as a module. As such, modules allow us <strong>(a) to distribute code across multiple files</strong> (which is convenient for bigger coding projects) and <strong>(b) to make use of collections of useful functions</strong> provided by other programmers. Many modules come with Python as part of the default installation. One such example is the <em>Itertools</em> module we saw in the previous session. Others include the <em>math</em> module and the <em>random</em> module, which contain helpful functions for mathematical operations and for dealing with distributional data.</p>
<p>Modules are <strong>loaded with an <em>import</em> statement</strong> (more below). Upon importing them, <strong>all statements in the imported module are executed</strong>.</p>
<p>In the following, we will focus on the <em>math</em> module:</p>
<section id="import-modules">
<h3>Import modules<a class="headerlink" href="#import-modules" title="Permalink to this heading">#</a></h3>
<p>Modules can be imported in three ways:</p>
<ul class="simple">
<li><p><em>import math</em>: makes all objects available as <em>math.object</em></p></li>
<li><p><em>from math import func</em>: makes <em>math.func</em> available as <em>func</em></p></li>
<li><p><em>from math import long_function_name as func</em>: makes <em>math.function_name_in_module</em> available as <em>func_name_in_my_code</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">factorial</span>  <span class="c1">#imports the function factorial(x) from the math module, assigns it the name fc</span>

<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="c1">#prints 4!</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>24
</pre></div>
</div>
</div>
</div>
<p>The names and functionalities of available modules can be looked up in Python’s documentation: <a class="reference external" href="https://docs.python.org/3/py-modindex.html">https://docs.python.org/3/py-modindex.html</a></p>
</section>
<section id="example-your-homework-as-module">
<h3>Example: Your homework as module<a class="headerlink" href="#example-your-homework-as-module" title="Permalink to this heading">#</a></h3>
<p>Our testing skripts import your homework as module. Your code gets loaded by <em>from ex_01 import *</em>. The star symbol indicates that the module should be imported with all functions and classes as elements in the current file’s namespace(, even if that would replace existing names). Thus, your function definitions are assigned to the function names, and the unit tests will be executed on your definitions.</p>
<p>The most basic element of our test code is the <em>assert</em> statement. Each such statement represents a basic fact which should hold of the program. For instance, <em>assertEquals(value, expression)</em> checks whether an expression correctly evaluates to a given value.</p>
<p>The code below also uses an object constructor (a <em>class</em>) and the <em>self</em> attribute. You’ll learn more about those in later sessions.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import unittest  
from ex_01 import *

class TestTask1(unittest.TestCase):

    def test_br_to_am_1(self):
        self.assertEqual(&quot;color&quot;, br_to_am(&quot;colour&quot;)) #checks whether the expression br_to_am(&quot;colour&quot;) 
        self.assertEqual(&quot;honor&quot;, br_to_am(&quot;honour&quot;)) #evaluates to &quot;color&quot;. If so, you get points!
</pre></div>
</div>
</section>
</section>
<section id="file-i-o">
<h2>File I/O<a class="headerlink" href="#file-i-o" title="Permalink to this heading">#</a></h2>
<p>Now that you know how to use <strong>modules</strong>, we’d also like to know how to use <strong>files</strong>. Creating data by assigning values to variables worked fine so far, but more often than not data already exists and we want to work with it. Python allows you to <strong>read in data</strong> from external files such that you can <strong>extract, analyse or modify</strong> its contents and <strong>save the results</strong> to (another) file.</p>
<p><strong>Files have two key properties</strong>:</p>
<ul class="simple">
<li><p>a filename (including name + file type, e.g. <em>example.txt</em>)</p></li>
<li><p>a path, which specifies its location on the computer (e.g. *C:\Users\jschwab\Documents\Teaching\Methods I*)</p></li>
</ul>
<section id="reading-and-writing-to-text-files">
<h3>Reading and writing to text files<a class="headerlink" href="#reading-and-writing-to-text-files" title="Permalink to this heading">#</a></h3>
<p>Plaintext files (<em>.txt</em>) contain only basic text characters and do not include font, size, or color information. They consist of lines of text with a newline symbol at the end of each line (in Python strings, a newline is represented by “\n”). Text files are one of the most elementary file types that we will deal with. Python can easily read them, treating their contents as string values.</p>
<section id="basic-elements-of-file-input">
<h4>Basic elements of file input:<a class="headerlink" href="#basic-elements-of-file-input" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>The function <em>open()</em> creates and returns a file handle</p>
<ul>
<li><p>obligatory argument: a file name (or a complete path)</p></li>
<li><p>optional: a string representing the <strong>mode</strong> in which the file is opened</p></li>
<li><p>optional: a string representing the <strong>encoding</strong> of the file (see below)</p></li>
</ul>
</li>
<li><p>Example: <em>open(“guide.txt”, “r”)</em></p></li>
<li><p>The default mode if no other is specified: <strong>“r” (“reading”</strong> – opens a file for reading only).<br />
Other options:<br />
<strong>“w” (“writing”</strong> – opens a file for writing only. If the file does not exist, creates a new file for writing).<br />
<strong>“a” (“appending”</strong> – opens a file for appending. New content is appended to the end of the file. If the file does not exist, creates a new file for writing).<br />
<strong>“x” (“creating”</strong> – creates a file and opens it. Fails if a file by that name already exists).</p></li>
<li><p>Additional specifiers to the mode: <strong>“+”</strong> (<em>r+ = read and write, w+ = write and read, a+ = append and read</em>), <strong>“b”</strong> (<em>rb/wb/ab = read/write/append in binary format</em>)</p></li>
</ul>
<p><strong>A file handle in reading mode has a few core functionalities:</strong></p>
<ul class="simple">
<li><p><em>file.read()</em> returns the whole document in a single string</p></li>
<li><p><em>file.readline()</em> returns the next unprocessed line of the file</p></li>
<li><p><em>file.readlines()</em> returns a list of strings, containing each line of the file as a string in the original order</p></li>
<li><p><em>file.close()</em> cancels or finishes the processing of the file, ensuring that the file is closed correctly</p></li>
</ul>
<p>Let’s presume we have a text file (<em>guide.txt</em>) that contains the following content:</p>
<blockquote>
<div><p>DOUGLAS ADAMS: The Hitchhiker’s Guide to the Galaxy<br />
Preface</p>
<p>Far out in the uncharted backwaters of the unfashionable end of
the western spiral arm of the Galaxy lies a small unregarded yellow
sun.</p>
<p>Orbiting this at a distance of roughly ninety-two million miles is an
utterly insignificant little blue green planet whose ape-descended life
forms are so amazingly primitive that they still think digital watches
are a pretty neat idea.</p>
<p>This planet has - or rather had - a problem, which was this: most
of the people on it were unhappy for pretty much of the time. Many
solutions were suggested for this problem, but most of these were
largely concerned with the movements of small green pieces of paper,
which is odd because on the whole it wasn’t the small green pieces of
paper that were unhappy.</p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fr = open(&quot;guide.txt&quot;, &quot;r&quot;)
title = fr.readline () #assigns the contents of the first line to a variable called title
chapter = fr.readline() #assigns the contents of the next line to a variable called chapter
contents = fr.read() #stores the full file contents in a variable called contents
fr.close () #closes the file
</pre></div>
</div>
</section>
<section id="basic-elements-of-file-output">
<h4>Basic elements of file output:<a class="headerlink" href="#basic-elements-of-file-output" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>To create or overwrite a file and write new contents into it, use <em>open(file_name,”w”)</em>.</p></li>
<li><p><em>file.write()</em> writes a string to the file, and returns the number of characters written</p></li>
<li><p><em>file.writelines()</em> takes a list of strings, and writes each of them into a new line of the file</p></li>
<li><p><em>file.flush()</em> forces the buffer to be flushed</p>
<ul>
<li><p>Note that file contents are not changed immediately. The operating system buffers changes in order to make file operations more efficient.</p></li>
<li><p>To force that the buffer is cleared, use <em>flush()</em>. The buffer is also cleared upon using <em>close()</em> or when closing a Python session.</p></li>
<li><p>This method can be useful if you want to ensure that file contents are securely saved in case the program might crash.</p></li>
</ul>
</li>
<li><p><em>file.close()</em> finishes the creation of the file, and ensures that the file is closed correctly</p></li>
</ul>
<p>Note that the <em>write</em> (<strong>“w”</strong>) and <em>append</em> (<strong>“a”</strong>) modes functions very similarly, except that the latter allows you to add new contents to the end of an existing file, whereas the former will overwrite all previous file contents.</p>
<p>Let’s presume we want to write a new file called <em>“example.txt”</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fp = open(&quot;example.txt&quot;, &quot;w&quot;)
while True:
    text = input(&quot;Enter a line to write to the file , or press ENTER to quit!&quot;) #accepts new text input
    if text == &quot;&quot;: #until the user enters nothing (just presses ENTER)
         break 
    fp.write(text) #writes the new input to the file
fp.close () #closes the file
</pre></div>
</div>
</section>
</section>
<section id="file-encodings">
<h3>FIle encodings<a class="headerlink" href="#file-encodings" title="Permalink to this heading">#</a></h3>
<p>As mentioned above, you can read and write files in various encodings. Technically, an encoding specifies the <strong>mapping between characters and the bit sequences that they are encoded as</strong>. Every text files encodes characters according to some encoding, the most relevant ones (for now) being <strong>ASCII</strong> (7-bit, English alphabet only), <strong>ISO 8859</strong> (8-bit, variable encodings depending on region/language, alphabetical writing systems only), and <strong>UTF-8</strong> unicode (variable length of 1-4 bytes (fyi, 1 byte = 1 8-bit sequence), all writing systems). The default encoding in Python is <strong>UTF-8</strong>.</p>
<p><strong>Examples:</strong></p>
<p>There’s <strong>no difference in the encoding</strong> of characters compatible with the <strong>English alphabet</strong>:</p>
<ul class="simple">
<li><p>UTF-8 binary encoding of “A” = 01000001</p></li>
<li><p>ASCII binary encoding of “A” = 01000001</p></li>
<li><p>ISO 8859-1 binary encoding of “A” = 01000001</p></li>
</ul>
<p>But it <strong>matters for many other languages</strong> (most obviously all languages with writing systems that do not use the Latin alphabet). Even for languages using the Latin alphabet, subtle differences mean that some encodings cannot capture their full character set.</p>
<p>The following German sentence can only be encoded in UTF-8:</p>
<p><em>Frank sagt: „Es könnte dieses Jahr weiße Weihnachten geben.“</em> (Frank says: “We might get a white Christmas this year”).</p>
<p>The problems for other encodings are:</p>
<ul class="simple">
<li><p>ASCII: No umlauts (<em>ä,ö,ü</em>), no <em>ß</em>, no German quotation marks (<em>„…“</em>)</p></li>
<li><p>ISO 8859-1: No German quotation marks (<em>„…“</em>)</p></li>
</ul>
<section id="more-on-different-encodings">
<h4>More on different encodings<a class="headerlink" href="#more-on-different-encodings" title="Permalink to this heading">#</a></h4>
<p><strong>ASCII</strong> (American Standard Code for Information Interchange)</p>
<ul class="simple">
<li><p>first introduced in the <strong>1960s</strong></p></li>
<li><p>wide range of control characters</p></li>
<li><p>limited to lower- and uppercase English alphabet</p></li>
<li><p>7-bit encoding with a leading 0 –&gt; 128 characters, all encoded in a single byte (0 0000 000 to 0 1111 111)</p></li>
<li><p>limited for non-US usage: no umlauts, accents or other diacritics, no currency symbols other than dollar</p></li>
<li><p>modifications were introduced in various countries, replacing ASCII characters with those of higher local significance, e.g., <em>ISCII</em> (Indian scripts), <em>VSCII</em> (Vietnamese)</p></li>
</ul>
<p><strong>ISO 8859</strong></p>
<ul class="simple">
<li><p>introduced by ISO (International Organization for Standardization) in <strong>1987</strong> to extend ASCII</p></li>
<li><p>same encoding as ASCII for all ASCII characters</p></li>
<li><p>upper range of 128 additional characters for localized symbols</p></li>
<li><p>different ISO 8859 standards for different regions (e.g. <em>ISO 8859-1</em> for Western Europeean languages, <em>ISO 8859-6</em> for Arabic, and so on…)</p></li>
</ul>
<p><strong>Unicode</strong> (using Unicode Transformation Format (UTF) for binary encoding)</p>
<ul class="simple">
<li><p>first released in <strong>1991</strong> as attempt to provide a <strong>universal encoding for all languages</strong>, contemporary and historic, including relevant non-linguistic symbols (currencies, …)</p></li>
<li><p>virtually universal coverage (139 scripts) with a single standard</p></li>
<li><p>multi-byte encoding with enough room for all current and many future symbols (1 114 111, of which 136 690 are currently used)</p></li>
<li><p>unicode can be encoded as <strong>UTF-8, UTF-16, or UTF-32</strong>, where each character will be represented as a sequence of one to four 8-bit bytes, one or two 16-bit code units, or a single 32-bit code unit, respectively.</p></li>
<li><p>UTF-8 is most common on the web. UTF-16 is used by Java and Windows. Both UTF-8 and UTF-32 are used by Linux and various Unix systems. <strong>Conversions between all of them are algorithmically based, fast and lossless.</strong></p></li>
</ul>
</section>
<section id="reading-and-writing-to-different-encodings">
<h4>Reading and writing to different encodings<a class="headerlink" href="#reading-and-writing-to-different-encodings" title="Permalink to this heading">#</a></h4>
<p>You can specify the file encoding when reading or writing files in Python. Python internally represents strings in UTF-8, so non-unicode encodings will be converted by Python:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ascii_file = open(file_name , encoding=&quot;ascii&quot;, &quot;r&quot;) #reads file in ASCII format
latin1_file = open(file_name , encoding=&quot;latin-1&quot;, &quot;w&quot;) #writes file in ISO 8859-1 format
</pre></div>
</div>
</section>
</section>
<section id="file-formats">
<h3>File formats<a class="headerlink" href="#file-formats" title="Permalink to this heading">#</a></h3>
<p>Above, we dealt with text files organised as sequences in the form of lines of text (<em>.txt</em> files). However, text-based data can be formatted in various ways for information exchange:</p>
<ul class="simple">
<li><p>Tab-Separated Values <strong>(TSV)</strong> or Comma-Separated Values <strong>(CSV)</strong> for <strong>tabular data</strong> (i.e. for datapoints consisting of values for predefined fields – think of <em>Excel</em> spreadsheets, but without colour, size, or font information)</p></li>
<li><p>Extensible Markup Language <strong>(XML)</strong> for <strong>hierarchically structured data</strong> where format checking is necessary (think of dictionaries, for instance)</p></li>
<li><p>JavaScript Object Notation <strong>(JSON)</strong> for uncomplicated <strong>data exchange between programs</strong></p></li>
<li><p>various <strong>binary formats</strong> (database files, matrices) for memory-efficient storage and transfer</p></li>
</ul>
<section id="csv-and-tsv">
<h4>CSV and TSV<a class="headerlink" href="#csv-and-tsv" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>standard table format</p></li>
<li><p>first line (“header”): field names</p></li>
<li><p>one entry per line</p></li>
<li><p>field values are separated by one designated delimiter, common choices:</p>
<ul>
<li><p>the tab character (TSV format, ending .tsv)</p></li>
<li><p>the comma (CSV format, ending .csv)</p></li>
</ul>
</li>
<li><p>if the delimiter occurs inside a field value, the value needs to be surrounded by double quotes; tools automatically handle this</p></li>
<li><p>parsing can be done via <em>split()</em>, but more safely via the <em>csv</em> module</p></li>
</ul>
<p><strong>Example table:</strong></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Age</p></th>
<th class="head"><p>Gender</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Saurabh</p></td>
<td><p>25</p></td>
<td><p>male</p></td>
</tr>
<tr class="row-odd"><td><p>Taylor</p></td>
<td><p>41</p></td>
<td><p>non-binary</p></td>
</tr>
<tr class="row-even"><td><p>Stephanie</p></td>
<td><p>30</p></td>
<td><p>female</p></td>
</tr>
</tbody>
</table>
<p><strong>in CSV file format:</strong></p>
<center>
Name,Age,Gender<br>  
Saurabh,25,male  <br>
Taylor,41,non-binary <br> 
Stephanie,30,female 
    </center>
<p><strong>Example usage of csv module:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import csv
csvfile = open(&#39;eggs.csv&#39;, newline=&#39;&#39;)
spamreader = csv.reader(csvfile, delimiter=&#39;,&#39;, quotechar=&#39;&quot;&#39;)
</pre></div>
</div>
</section>
<section id="extensible-markup-language-xml">
<h4>Extensible Markup Language (XML)<a class="headerlink" href="#extensible-markup-language-xml" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>data is structured by user-defined tags like &lt;country&gt;</p></li>
<li><p>textual data is stored in elements: &lt;tag&gt;text&lt;/tag&gt;</p></li>
<li><p>elements can have attributes: &lt;country id=”AF”&gt;</p></li>
<li><p>elements can contain other elements (nested structure)</p></li>
<li><p>XML processing is very complex, do not try this on your own! Use <em>xml.dom</em> and <em>xml.sax</em> modules for representing and processing XML documents</p></li>
</ul>
<p><strong>Example of XML document:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>\&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
\&lt;countryDatabase&gt;
    \&lt;country id=&quot;AF&quot;&gt;
        \&lt;name&gt;Afghanistan&lt;/name&gt;
        \&lt;province id=&quot;BDS&quot;&gt;
            \&lt;name&gt;Badakhshan&lt;/name&gt;
            \&lt;capital&gt;Fayzabad&lt;/capital&gt;
        \&lt;/province&gt;
        \&lt;province id=&quot;BDG&quot;&gt;
            \&lt;name&gt;Badghis&lt;/name&gt;
            \&lt;capital&gt;Qala i Naw&lt;/capital&gt;
        \&lt;/province&gt;
        ...
    \&lt;/country&gt;
...
\&lt;/countryDatabase&gt;
</pre></div>
</div>
</section>
</section>
<section id="javascript-object-notation-json">
<h3>JavaScript Object Notation (JSON):<a class="headerlink" href="#javascript-object-notation-json" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>structured data represented using arrays and key-value pairs</p></li>
<li><p>syntax is mostly identical to Python literals!</p></li>
<li><p>However, when processing JSON files, some subtle differences between Python and JSON notation mean that not every Python literal can directly be interpreted as JSON, and vice versa (e.g. tuples don’t exist in JSON, lists and tuples both correspond to arrays)</p></li>
<li><p><em>json</em> module can dump any nested data structure to a JSON file, and load any JSON structure from a file</p></li>
</ul>
<p><strong>Example of a JSON document:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[{&quot;ID&quot;: &quot;AF&quot;,  
  &quot;Name&quot;: &quot;Afghanistan&quot;,
  &quot;Provinces&quot;:
   [{&quot;ID&quot;: &quot;BDS&quot;, &quot;Name&quot;: &quot;Badakshan&quot;, &quot;Capital&quot;: &quot;Fayzabad&quot;}, 
   {&quot;ID&quot;: &quot;BDG&quot;, &quot;Name&quot;: &quot;Badghis&quot;, &quot;Capital&quot;: &quot;Qala i Naw&quot;},...
   ]
 },
 {&quot;ID&quot;: &quot;AL&quot;,
   &quot;Name&quot;: &quot;Albania&quot;,
    ...
 },
...
]
</pre></div>
</div>
<p><strong>Example usage of <em>json</em> module:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import json

jsonfile = open(&#39;filename.json&#39;)
data = json.load(jsonfile) #read JSON file
 
dictionary = {
    &quot;ID&quot;: &quot;AF&quot;,
    &quot;Name&quot;: &quot;Afghanistan&quot;,
    &quot;Provinces&quot;: [{&quot;ID&quot;: &quot;BDS&quot;, &quot;Name&quot;: &quot;Badakshan&quot;, &quot;Capital&quot;: &quot;Fayzabad&quot;}, 
                 {&quot;ID&quot;: &quot;BDG&quot;, &quot;Name&quot;: &quot;Badghis&quot;, &quot;Capital&quot;: &quot;Qala i Naw&quot;},...
                 ]
    }

outfile = open(&quot;countries.json&quot;, &quot;w&quot;)
json.dump(dictionary, outfile) #save dictionary to countries.json
</pre></div>
</div>
</section>
<section id="wrapping-up-lose-ends-exception-handling">
<h3>Wrapping up lose ends: exception handling<a class="headerlink" href="#wrapping-up-lose-ends-exception-handling" title="Permalink to this heading">#</a></h3>
<p>Python will <strong>throw errors and end code execution</strong> if you try to read or write to files that:</p>
<ul class="simple">
<li><p>do not exist (FileNotFoundError)</p></li>
<li><p>you do not have the correct permissions for (PermissionError)</p></li>
<li><p>the storage device does not have enough space for (IOError)</p></li>
</ul>
<p>A more elegant solution for <strong>handling exceptions</strong> is to <strong>pre-define how potential errors should be handled at runtime</strong>:</p>
<ul class="simple">
<li><p>The <em>try</em> construct comprises a <strong>try</strong> block, an <strong>except</strong> block, and a <strong>finally</strong> block, which specify the statements that could raise exceptions, what should happen if exceptions occur, and what statements should be executed in any case, regardless of whether the <em>try</em> block was successfully executed or not.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.txt&quot;</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR: file not found!&quot;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>The <strong><em>with</em> construct opens files and performs common cleanup tasks</strong>, such as closing the file, regardless of whether exceptions are raised within the code block</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># without with</span>
<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># using with</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello world !&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Notice that there is <strong>no need to call <em>file.close()</em></strong>. The <em>with</em> statement itself ensures proper acquisition and release of resources, regardless of whether the <em>file.write</em> method throws exceptions.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "michael-franke/PythonIntro",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="session04.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Advanced data types: lists, tuples, sets, dictionaries</p>
      </div>
    </a>
    <a class="right-next"
       href="session06.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">More on functions, loops, dictionaries, and files</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modules">Modules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-modules">Import modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-your-homework-as-module">Example: Your homework as module</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-i-o">File I/O</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-writing-to-text-files">Reading and writing to text files</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-elements-of-file-input">Basic elements of file input:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-elements-of-file-output">Basic elements of file output:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-encodings">FIle encodings</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#more-on-different-encodings">More on different encodings</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-writing-to-different-encodings">Reading and writing to different encodings</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-formats">File formats</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#csv-and-tsv">CSV and TSV</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#extensible-markup-language-xml">Extensible Markup Language (XML)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#javascript-object-notation-json">JavaScript Object Notation (JSON):</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wrapping-up-lose-ends-exception-handling">Wrapping up lose ends: exception handling</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Juliane Schwab, Michael Franke & Todd Snider
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>